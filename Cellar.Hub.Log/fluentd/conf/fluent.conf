
<source>
  @type forward
  port 24224
  bind 0.0.0.0
  key_name log
  format json # one JSON per line
</source>
# <source>
#   @type http
#   port 9880
# </source>
# <source>
#   @type tail
#   path /var/log/syslog #...or where you placed your Apache access log
#   pos_file /var/log/mysyslog.log.pos # This is where you record file position
#   tag foobar.json #fluentd tag!
#   format json # one JSON per line
#   time_key time_field # optional; default = time
# </source>
# <filter **>
#   @type concat
#   key log
#   multiline_start_regexp /^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2}) [(Trace|Debug|Information|Warning|Error|Critical)]/
#   multiline_end_regexp /^[||||||]/
# </filter>
<match **>
  @type copy
  # message log
  # languages go, csharp
  # multiline_flush_interval 0.1
  <store>
    @type elasticsearch
    host elasticsearch
    port 9200
    user elastic
    password changeme
    logstash_format true
    logstash_prefix fluentd
    logstash_dateformat %Y%m%d
    include_tag_key true
    type_name fluentdlogging
    tag_key @log_name
    flush_interval 1s
  </store>
  <store>
    @type stdout
  </store>
</match>

